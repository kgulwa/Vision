<div 
  class="fixed inset-0 bg-black bg-opacity-50 hidden items-center justify-center z-50"
  data-save-modal-target="overlay"
  data-controller="save-modal"
  data-save-modal-pin-id="<%= @pin.id %>"
>
  <div class="bg-white rounded-xl p-6 w-full max-w-md shadow-xl">

    <h2 class="text-lg font-bold mb-4">Save to Collection</h2>

    <!-- Existing collections -->
    <div class="space-y-2 mb-4">
      <% current_user.collections.each do |collection| %>
        <button 
          class="w-full text-left px-4 py-2 border rounded-lg hover:bg-gray-100"
          data-action="click->save-modal#saveToExisting"
          data-collection-id="<%= collection.id %>"
        >
          <%= collection.name %>
        </button>
      <% end %>
    </div>

    <!-- Create new collection -->
    <div class="mb-4">
      <input 
        type="text" 
        placeholder="New collection name" 
        class="w-full px-3 py-2 border rounded-lg"
        data-save-modal-target="newCollectionName"
      >

      <button 
        class="mt-2 w-full bg-blue-600 text-white py-2 rounded-lg hover:bg-blue-700"
        data-action="click->save-modal#createCollection"
      >
        Create & Save
      </button>
    </div>

    <!-- Default -->
    <button 
      class="w-full py-2 border rounded-lg hover:bg-gray-100"
      data-action="click->save-modal#saveToDefault"
    >
      Save to Default
    </button>

    <!-- Close -->
    <button 
      class="w-full py-2 mt-4 bg-red-200 text-red-700 rounded-lg hover:bg-red-300"
      data-action="click->save-modal#close"
    >
      Cancel
    </button>

  </div>
</div>