<div class="max-w-xl mx-auto px-4 pt-6">

  <h1 class="text-xl font-semibold mb-4">Search Users</h1>

  <%= form_with url: user_search_path, method: :get, local: true do %>
    <input
      type="text"
      name="query"
      placeholder="Search users..."
      value="<%= params[:query] %>"
      class="w-full border px-4 py-2 rounded-lg mb-4"
    />
  <% end %>

  <% if @history.present? %>
    <div class="flex items-center justify-between mb-2">
      <h2 class="text-gray-600 text-lg font-semibold">Recent Searches</h2>

      <%= button_to "Clear", clear_search_history_path,
            method: :delete,
            class: "text-sm text-red-600 hover:text-red-800" %>
    </div>

    <div class="flex flex-col gap-2 mb-6">
      <% @history.each do |item| %>
        <%= link_to user_search_path(query: item.query),
              class: "text-gray-800 hover:text-black font-medium" do %>
          <%= item.query.capitalize %>
        <% end %>
      <% end %>
    </div>
  <% end %>

  <% if @users.any? %>
    <div class="space-y-3">
      <% @users.each do |user| %>
        <%= link_to user_path(user),
              class: "flex items-center space-x-4 p-4 bg-white rounded-xl shadow hover:shadow-md hover:bg-gray-50 transition" do %>

      
          <div class="flex-shrink-0">
            <%= user_avatar(user, size: 48) %>
          </div>

          <!-- USER INFO -->
          <div class="flex flex-col">
            <span class="font-semibold text-gray-900 text-lg">
              <%= user.username %>
            </span>

            <% if user.email.present? %>
              <span class="text-gray-500 text-sm">
                <%= user.email %>
              </span>
            <% end %>
          </div>

        <% end %>
      <% end %>
    </div>

  <% elsif params[:query].present? %>
    <p class="text-gray-500 mt-4">No users found.</p>
  <% end %>

</div>
