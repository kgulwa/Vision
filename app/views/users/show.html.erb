<div class="max-w-5xl mx-auto py-8 px-4 space-y-8">

  <!-- Profile Header -->
  <div class="flex items-center justify-between">
    <div class="flex items-center space-x-4">
      <div class="w-20 h-20 bg-blue-600 rounded-full flex items-center justify-center text-white text-3xl font-bold">
        <%= @user.username[0].upcase %>
      </div>

      <div>
        <h1 class="text-3xl font-bold text-gray-900"><%= @user.username %></h1>
        <p class="text-gray-600"><%= @user.followers.count %> followers</p>
      </div>
    </div>

    <% if logged_in? && current_user != @user %>
      <% if current_user.following?(@user) %>
        <%= button_to user_follow_path(@user), method: :delete,
            class: "px-6 py-2 border border-gray-300 rounded-full hover:bg-gray-200" do %>
          Following
        <% end %>
      <% else %>
        <%= button_to user_follow_path(@user), method: :post,
            class: "px-6 py-2 bg-blue-600 text-white rounded-full hover:bg-blue-700" do %>
          Follow
        <% end %>
      <% end %>
    <% end %>
  </div>

  <!-- Tabs -->
  <div class="flex space-x-6 border-b pb-2">
    <button 
      data-tab-target="pins" 
      class="py-2 font-semibold text-blue-600 border-b-2 border-blue-600">
      Pins
    </button>

    <button 
      data-tab-target="reposts" 
      class="py-2 font-semibold text-gray-600 hover:text-blue-600">
      Reposts
    </button>
  </div>

  <!-- PINS GRID -->
  <div id="tab-pins" class="grid grid-cols-2 md:grid-cols-3 gap-4">
    <% @pins.each do |pin| %>
      <%= link_to pin_path(pin), class: "block" do %>
        <% if pin.image.attached? %>
          <%= image_tag pin.image,
              class: "rounded-lg shadow object-cover w-full h-48 md:h-60" %>
        <% end %>
      <% end %>
    <% end %>

    <% if @pins.empty? %>
      <p class="col-span-full text-center text-gray-500 py-10">
        No pins yet.
      </p>
    <% end %>
  </div>

  <!-- REPOSTS GRID -->
  <div id="tab-reposts" class="hidden grid grid-cols-2 md:grid-cols-3 gap-4">
    <% @reposted_pins.each do |pin| %>
      <%= link_to pin_path(pin), class: "block" do %>
        <% if pin.image.attached? %>
          <%= image_tag pin.image,
              class: "rounded-lg shadow object-cover w-full h-48 md:h-60" %>
        <% end %>
      <% end %>
    <% end %>

    <% if @reposted_pins.empty? %>
      <p class="col-span-full text-center text-gray-500 py-10">
        No reposts yet.
      </p>
    <% end %>
  </div>

</div>

<!-- TAB LOGIC -->
<script>
  const buttons = document.querySelectorAll("[data-tab-target]");
  const tabs = {
    pins: document.getElementById("tab-pins"),
    reposts: document.getElementById("tab-reposts")
  };

  buttons.forEach(btn => {
    btn.addEventListener("click", () => {

      // reset button styles
      buttons.forEach(b => {
        b.classList.remove("text-blue-600", "border-blue-600", "border-b-2");
        b.classList.add("text-gray-600");
      });

      // activate selected tab
      btn.classList.remove("text-gray-600");
      btn.classList.add("text-blue-600", "border-b-2", "border-blue-600");

      tabs.pins.classList.add("hidden");
      tabs.reposts.classList.add("hidden");

      const target = btn.dataset.tabTarget;
      tabs[target].classList.remove("hidden");
    });
  });
</script>
